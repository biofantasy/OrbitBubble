# OrbitBubble (環繞泡泡選單)

## 1. 專案概述

本專案旨在開發一個 Windows 11/10 系統下的現代化導航工具。透過自定義的滑鼠手勢（旋轉）或全域熱鍵觸發一個放射狀的泡泡選單，提供直覺的檔案瀏覽與系統操作體驗。

## 2. 核心架構與技術棧

+ 目標平台： Windows 10 / 11 (x64)
+ 開發框架： .NET 8 / WPF (Windows Presentation Foundation)
+ 渲染技術： Composition API (用於毛玻璃與流體動畫)
+ 系統交互： Win32 API (User32.dll) Hook 機制

## 3. 功能需求規範

### 3.1 觸發機制 (Triggering)

+ 滑鼠手勢：
    - 監聽滑鼠 WH_MOUSE_LL。
    - 演算法： 記錄連續 300ms 內的座標點，計算是否形成一個閉合圓形（容錯率 20%）。
    - 觸發後，於滑鼠當前座標中心生成選單。
+ 全域熱鍵：
    - 支援用戶自定義組合鍵（預設：Alt + Space）。
    - 使用 RegisterHotKey 實現背景監聽。

### 3.2 介面邏輯 (UI/UX)

+ 中心圓 (Center Hub)：
    - 顯示當前路徑名稱或圖標。
    - 左鍵點擊： 回到上一層資料夾。
    - 右鍵點擊： 彈出「系統設定」選單。

+ 浮游泡泡 (Orbiting Bubbles)：
    - 圍繞中心圓等距分佈。
    - 泡泡內顯示檔案/資料夾名稱與縮圖。
    - 動畫效果： 進入時由中心向外彈出 (Ease-out back)，閒置時有微小的上下浮動感 (Sine wave)。
    - 層級導航： 點擊資料夾泡泡，舊泡泡向外淡出，新層級泡泡由中心彈出。

### 3.3 設定選單 (Configuration)

透過中心圓右鍵觸發，功能包括：
+ 手勢設定： 開啟/關閉旋轉觸發、調整辨識靈敏度。
+ 熱鍵管理： 錄製新的組合鍵。
+ 視覺自訂： 泡泡大小、顏色主題（深色/淺色/跟隨系統）、透明度調整。
+ 黑名單： 指定程式在執行時自動禁用手勢（如遊戲時避免誤觸）。

## 4. 資料與效能設計

+ 非同步載入： 檔案圖標與路徑讀取必須在背景執行緒完成，不得阻塞 UI 動畫。
+ 快取機制： 已讀取的檔案圖標需快取於記憶體中，提升重複開啟的速度。
+ 低耗能模式： 選單關閉時，滑鼠 Hook 僅進行輕量計算；選單顯示時才啟動 60 FPS 渲染。

## 5. 風險評估

1. 防毒軟體誤判： 全域滑鼠 Hook 可能被部分防毒體視為惡意行為。解決方案：申請數位簽章或提供白名單指引。

2. 效能瓶頸： 當資料夾內有數百個檔案時，圓形選單會過於擁擠。解決方案：限制單層顯示上限（如前 12 個），並提供「更多...」泡泡。